<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
	  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	  th:with="title='Профиль пользователя'">

<th:block th:replace="fragments/common::commonPage(_, ~{::main})">
	<main>
		<h3>[[${title}]]</h3>
		<div th:if="${message}" class="alert alert-danger" role="alert">
			[[${message}]]
		</div>

		<form method="post">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Имя: </label>
				<div class="col-sm-6">
					<input th:class="${firstNameError}?'form-control is-invalid':'form-control'"
						type="text" name="firstName" th:value="${user}?${user.firstName}:${firstName}" placeholder="Имя"/>
					<div th:if="${firstNameError}" class="invalid-feedback" th:text="${firstNameError}"></div>
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Фамилия: </label>
				<div class="col-sm-6">
					<input th:class="${lastNameError}?'form-control is-invalid':'form-control'"
						type="text" name="lastName" th:value="${user}?${user.lastName}:${lastName}" placeholder="Фамилия"/>
					<div th:if="${lastNameError}" class="invalid-feedback" th:text="${lastNameError}"></div>
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Email: </label>
				<div class="col-sm-6">
					<input th:class="${emailError}?'form-control is-invalid':'form-control'"
						type="text" name="email" th:value="${user}?${user.email}:${email}" placeholder="Email"/>
					<div th:if="${emailError}" class="invalid-feedback" th:text="${emailError}"></div>
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Новый пароль: </label>
				<div class="col-sm-6">
					<input th:class="${passwordError}?'form-control is-invalid':'form-control'"
						type="password" name="password" placeholder="Пароль"/>
					<div th:if="${passwordError}" class="invalid-feedback" th:text="${passwordError}"></div>
				</div>
			</div>
			<div class="form-group row">
        		<label class="col-sm-2 col-form-label">Повторите пароль: </label>
        		<div class="col-sm-6">
        			<input th:class="${confirmPasswordError}?'form-control is-invalid':'form-control'"
						type="password" name="confirmPassword" placeholder="Повторите пароль"/>
        			<div th:if="${confirmPasswordError}" class="invalid-feedback" th:text="${confirmPasswordError}"></div>
        		</div>
			</div>
			<button class="btn btn-primary mt-3" type="submit">Сохранить</button>			
			<div class="float-right mt-4"><a href="/main">На главную</a></div>
		</form>
	</main>
</th:block>

</html>